<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>æ–°ä¼šé™ˆçš®äº§ä¸šçœ‹æ¿ - æ•°å­—åŒ–ç®¡ç†ç³»ç»Ÿ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=ZCOOL+XiaoWei&family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        /* --- æŸ‘æ©˜Â·é™ˆçš®Â·ç¯ä¿ ä¸»é¢˜é…ç½® (Citrus Eco Theme) --- */
        :root {
            --primary-green: #2E7D32;    /* æ·±ç»¿ï¼šæˆç†ŸæŸ‘å¶ */
            --primary-light: #66BB6A;    /* æµ…ç»¿ï¼šå«©å¶ */
            --citrus-orange: #EF6C00;    /* é™ˆçš®æ©™ï¼šæ™’å¹²çš„é™ˆçš® */
            --citrus-gold: #FFB300;      /* é‡‘é»„ï¼šæ–°é²œæŸ‘æœ */
            --bg-cream: #FAFAF5;         /* ç±³ç™½ï¼šæ¸©æš–èƒŒæ™¯ */
            --text-dark: #1B3A24;        /* æ·±å¢¨ç»¿ï¼šæ­£æ–‡æ–‡å­— */
            --text-medium: #45664E;      /* ä¸­ç»¿ï¼šæ¬¡è¦æ–‡å­— */
            --glass-bg: rgba(255, 255, 255, 0.85); /* ç£¨ç ‚ç»ç’ƒèƒŒæ™¯ */
            --glass-border: rgba(255, 255, 255, 0.6);
            --shadow-soft: 0 10px 40px rgba(46, 125, 50, 0.08);
            --shadow-hover: 0 15px 50px rgba(239, 108, 0, 0.15);
            --radius-lg: 24px;
            --radius-md: 16px;
            --nav-height: 80px;
        }

        /* --- åŸºç¡€è®¾ç½® --- */
        body { 
            font-family: "Noto Sans SC", "Segoe UI", Roboto, sans-serif; 
            margin: 0; 
            background-color: var(--bg-cream); 
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255, 249, 196, 0.4) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(200, 230, 201, 0.4) 0%, transparent 40%);
            color: var(--text-dark);
            -webkit-font-smoothing: antialiased;
        }

        /* --- é¡¶éƒ¨å¯¼èˆªæ  --- */
        .top-navbar {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 95%;
            max-width: 1400px;
            height: var(--nav-height);
            background: var(--glass-bg);
            backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            box-sizing: border-box;
            box-shadow: var(--shadow-soft);
            z-index: 1100;
            transition: all 0.3s ease;
        }

        .logo-area {
            font-family: "ZCOOL XiaoWei", serif;
            font-size: 28px;
            color: var(--primary-green);
            display: flex;
            align-items: center;
            gap: 12px;
            letter-spacing: 1px;
        }
        
        .logo-area span:first-child {
            position: relative;
        }
        
        .logo-area span:first-child::after {
            content: 'ğŸŠ';
            font-size: 20px;
            position: absolute;
            top: -10px;
            right: -15px;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
        }

        .nav-menu {
            display: flex;
            align-items: center;
            gap: 30px;
        }

        .nav-item {
            text-decoration: none;
            color: var(--text-medium);
            font-size: 15px;
            font-weight: 500;
            transition: color 0.3s;
            position: relative;
        }

        .nav-item::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--citrus-orange);
            transition: width 0.3s;
        }

        .nav-item:hover { color: var(--citrus-orange); }
        .nav-item:hover::after { width: 100%; }

        /* ç™»å½•æ³¨å†ŒæŒ‰é’®æ ·å¼ */
        .auth-buttons {
            display: flex;
            gap: 12px;
            margin-left: 20px;
        }

        .btn {
            padding: 10px 24px;
            border-radius: 50px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: none;
            letter-spacing: 0.5px;
        }

        .btn-login {
            color: var(--primary-green);
            background: transparent;
            border: 2px solid var(--primary-green);
        }
        .btn-login:hover { 
            background: rgba(46, 125, 50, 0.08); 
            transform: translateY(-2px);
        }

        .btn-signup {
            background: linear-gradient(135deg, var(--citrus-orange), var(--citrus-gold));
            color: white;
            box-shadow: 0 4px 15px rgba(239, 108, 0, 0.3);
        }
        .btn-signup:hover { 
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 8px 25px rgba(239, 108, 0, 0.4);
        }

        /* --- ä¾§è¾¹æ  --- */
        .sidebar {
            position: fixed;
            left: -280px;
            width: 280px;
            height: calc(100vh - 140px);
            top: 120px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid white;
            color: var(--text-dark);
            transition: all 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
            z-index: 1000;
            padding: 30px 20px;
            border-radius: 0 24px 24px 0;
            box-shadow: 20px 0 40px rgba(0,0,0,0.05);
        }

        .sidebar:hover { left: 0; }

        .toggle-btn {
            position: absolute;
            right: -60px;
            top: 0px;
            width: 60px;
            height: 60px;
            background: white;
            color: var(--primary-green);
            cursor: pointer;
            border-radius: 0 16px 16px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 5px 0 20px rgba(0,0,0,0.05);
            transition: transform 0.3s;
        }
        
        .sidebar:hover .toggle-btn {
            transform: scale(0.9);
            color: var(--citrus-orange);
        }

        .nav-list { list-style: none; padding: 0; margin-top: 30px; opacity: 0; transition: opacity 0.3s 0.2s; }
        .sidebar:hover .nav-list { opacity: 1; }
        .nav-list a { 
            display: block; 
            padding: 16px 20px; 
            color: var(--text-medium); 
            text-decoration: none; 
            border-radius: 12px; 
            margin-bottom: 8px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .nav-list li a:hover { 
            background: linear-gradient(90deg, rgba(255, 243, 224, 0.6), transparent);
            color: var(--citrus-orange); 
            transform: translateX(5px); 
            transition: all 0.3s; 
        }

        /* --- å†…å®¹å±•ç¤ºåŒº --- */
        #content-area {
            padding: 140px 50px 50px 80px;
            min-height: 100vh;
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
        }
        
        /* è£…é¥°èƒŒæ™¯å…ƒç´  */
        #content-area::before {
            content: '';
            position: fixed;
            right: -100px;
            bottom: -100px;
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, var(--citrus-gold) 0%, transparent 70%);
            opacity: 0.1;
            z-index: -1;
            pointer-events: none;
        }

        /* é€šç”¨å¡ç‰‡æ ·å¼ (Glass Card) */
        .glass-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.6);
            border-radius: var(--radius-md);
            box-shadow: 0 4px 20px rgba(0,0,0,0.03);
            transition: all 0.4s ease;
        }
        .glass-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.06);
            background: rgba(255, 255, 255, 0.9);
            border-color: var(--primary-light);
        }
        
        /* èŠå¤©æ¨¡æ€çª—å£æ ·å¼ */
        .chat-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s;
        }

        .chat-window {
            background: white;
            border-radius: 16px;
            width: 90%;
            max-width: 600px;
            height: 80vh;
            max-height: 700px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
            background: #f5f5f5;
        }

        .chat-messages::-webkit-scrollbar {
            width: 8px;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: #ccc;
            border-radius: 4px;
        }

        .chat-input {
            padding: 16px;
            background: white;
            border-top: 1px solid #e0e0e0;
            display: flex;
            gap: 10px;
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        /* ä»ªè¡¨æ¿Gridå¸ƒå±€ */
        .dashboard-grid {
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
            gap: 25px; 
            margin-top: 30px;
        }
        
        /* æ ‡é¢˜æ ·å¼ */
        h1, h2, h3 { font-family: "Noto Sans SC", sans-serif; font-weight: 700; }
        .page-title {
            color: var(--text-dark);
            border-bottom: none !important;
            position: relative;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        .page-title::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 60px;
            height: 6px;
            background: linear-gradient(90deg, var(--primary-green), var(--citrus-orange));
            border-radius: 3px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- å¼¹çª—æ ·å¼ä¼˜åŒ– --- */
        #login-modal > div {
            border: 1px solid white !important;
            backdrop-filter: blur(20px) !important;
            background: rgba(255, 255, 255, 0.95) !important;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15) !important;
            border-radius: 24px !important;
        }
        
        input[type="text"], input[type="password"], input[type="date"], input[type="number"], select, textarea {
            background: #F5F7F5 !important;
            border: 1px solid #E0E0E0 !important;
            border-radius: 12px !important;
            padding: 14px 16px !important;
            transition: all 0.3s !important;
        }
        
        input:focus, select:focus, textarea:focus {
            background: white !important;
            border-color: var(--primary-green) !important;
            box-shadow: 0 0 0 4px rgba(46, 125, 50, 0.1) !important;
            outline: none;
        }
        
        .tab-active {
            color: var(--primary-green) !important;
            border-bottom-color: var(--primary-green) !important;
        }

    </style>
</head>
<body>

    <header class="top-navbar">
        <div class="logo-area">
            <span>å¾ªæœç¯ç”Ÿ</span> <span style="font-family: 'Noto Sans SC', sans-serif; font-size: 13px; color: var(--text-medium); font-weight: normal; margin-top: 6px; margin-left: 8px; letter-spacing: 0;">æŸ‘æ©˜æœè‚‰åºŸç‰©å›æ”¶å¹³å°</span>
        </div>

        <nav class="nav-menu">
            <a href="#" class="nav-item">å…³äºæˆ‘ä»¬</a>
            <a href="#" class="nav-item">è”ç³»æˆ‘ä»¬</a>
            
            <div class="auth-buttons">
                <a href="#" class="btn btn-login">ç™»å½•</a>
                <a href="#" class="btn btn-signup">æ³¨å†Œ</a>
            </div>
        </nav>
    </header>

    <nav class="sidebar" id="sidebar">
        <div class="toggle-btn">
            <div style="font-size: 24px;">â˜°</div>
        </div>
        
        <div style="padding: 0 20px;">
            <h2 style="color: var(--primary-green); font-size: 18px; margin-bottom: 5px;">åŠŸèƒ½èœå•</h2>
            <div style="width: 40px; height: 3px; background: var(--citrus-orange); border-radius: 2px;"></div>
        </div>
        <ul class="nav-list">
            <li><a href="#">ğŸ  è¯·ç™»å½•ä¹‹åç»§ç»­</a></li>
        </ul>
    </nav>

    <div id="content-area">
        <div style="animation: fadeIn 0.6s ease; text-align: center; padding-top: 50px;">
            <div style="font-size: 80px; margin-bottom: 20px;">ğŸŠ</div>
            <h1 style="font-family: 'Noto Sans SC', sans-serif; font-size: 48px; color: var(--text-dark); margin-bottom: 10px; font-weight: 700;">WELCOME<br>è¯·ç™»å½•ä¹‹åç»§ç»­</h1>
            <p style="color: var(--text-medium); font-size: 20px; letter-spacing: 1px;">æ–°ä¼šé™ˆçš®äº§ä¸šæ•°å­—åŒ–ç®¡ç†ç³»ç»Ÿ</p>
            
            <div style="width: 80px; height: 4px; background: linear-gradient(90deg, var(--primary-green), var(--citrus-orange)); margin: 40px auto; border-radius: 2px;"></div>
        </div>
    </div>


    <!-- ç™»å½•/æ³¨å†Œå¼¹çª— -->
    <div id="login-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 2000; align-items: center; justify-content: center; backdrop-filter: blur(5px);">
        <div style="width: 420px; position: relative; overflow: hidden;">
            <!-- å…³é—­æŒ‰é’® -->
            <span onclick="authSystem.closeLoginModal()" style="position: absolute; right: 20px; top: 15px; cursor: pointer; font-size: 24px; z-index: 10; color: #999; transition: color 0.3s; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: #f5f5f5;">Ã—</span>
            
            <!-- æ ‡ç­¾é¡µ -->
            <div style="display: flex; border-bottom: 1px solid rgba(0,0,0,0.05);">
                <div id="login-tab" onclick="authSystem.switchTab('login')" class="tab-active" style="flex: 1; padding: 20px; text-align: center; cursor: pointer; border-bottom: 3px solid transparent; font-weight: 700; font-size: 16px; transition: all 0.3s;">
                    ç™»å½•
                </div>
                <div id="register-tab" onclick="authSystem.switchTab('register')" style="flex: 1; padding: 20px; text-align: center; cursor: pointer; border-bottom: 3px solid transparent; color: #999; font-weight: 700; font-size: 16px; transition: all 0.3s;">
                    æ³¨å†Œ
                </div>
            </div>
            
            <!-- ç™»å½•è¡¨å• -->
            <div id="login-form" style="padding: 30px 40px 40px;">
                <h3 style="text-align: center; color: var(--text-dark); margin-bottom: 25px; font-weight: 700;">æ¬¢è¿å›æ¥ï¼Œè¯·ç™»å½•</h3>
                
                <div style="background: rgba(239, 108, 0, 0.08); border-left: 4px solid var(--citrus-orange); padding: 12px 16px; margin-bottom: 25px; border-radius: 8px; font-size: 13px; color: #5D4037;">
                    <p style="margin: 0 0 5px 0;"><strong>ğŸ› ï¸ æµ‹è¯•è´¦å·ï¼š</strong></p>
                    <div style="display: grid; grid-template-columns: 1fr; gap: 4px;">
                        <span>ğŸ‘¨â€ğŸ’¼ ç®¡ç†å‘˜: admin001 / admin123</span>
                        <span>ğŸŒ¾ å†œæˆ·: farmer001 / farmer123</span>
                        <span>â™»ï¸ å›æ”¶å•†: recycler001 / recycler123</span>
                        <span>ğŸ­ å¤„ç†å•†: processor001 / processor123</span>
                    </div>
                </div>
                
                <input type="text" id="username" placeholder="æ‰‹æœºå· / ç”¨æˆ·å" style="width: 100%; margin-bottom: 16px; box-sizing: border-box;">
                <input type="password" id="password" placeholder="å¯†ç " style="width: 100%; margin-bottom: 24px; box-sizing: border-box;">
                
                <button onclick="authSystem.handleLogin()" style="width: 100%; padding: 14px; background: var(--primary-green); color: white; border: none; border-radius: 50px; font-weight: bold; cursor: pointer; font-size: 16px; transition: all 0.3s; box-shadow: 0 4px 15px rgba(46, 125, 50, 0.3);">ç«‹å³ç™»å½•</button>
            </div>
            
            <!-- æ³¨å†Œè¡¨å• -->
            <div id="register-form" style="padding: 30px 40px 40px; display: none;">
                <h3 style="text-align: center; color: var(--text-dark); margin-bottom: 20px;">æ‰‹æœºéªŒè¯ç æ³¨å†Œ</h3>

                <input type="text" id="reg-phone" placeholder="æ‰‹æœºå·ï¼ˆç”¨äºç™»å½•ï¼‰" style="width: 100%; margin-bottom: 12px; box-sizing: border-box;">
                <div style="display: flex; gap: 10px; margin-bottom: 12px;">
                    <input type="text" id="reg-otp" placeholder="çŸ­ä¿¡éªŒè¯ç " style="flex: 1; margin-bottom: 0; box-sizing: border-box;">
                    <button id="btn-send-otp" style="width: 120px; background: var(--citrus-orange); color: white; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 13px; transition: all 0.3s;">å‘é€éªŒè¯ç </button>
                </div>

                <div style="margin-bottom: 12px;">
                    <div id="slider-track" style="position: relative; height: 44px; background: #f0f0f0; border-radius: 12px; user-select: none; overflow: hidden;">
                        <div id="slider-text" style="position: absolute; left: 0; right: 0; top: 0; bottom: 0; display: flex; align-items: center; justify-content: center; color: #999; font-size: 13px;">æŒ‰ä½æ»‘å—æ‹–åŠ¨éªŒè¯</div>
                        <div id="slider-knob" style="position: absolute; left: 0; top: 2px; width: 44px; height: 40px; background: white; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); display: flex; align-items: center; justify-content: center; cursor: pointer; margin-left: 2px; color: var(--primary-green); font-weight: bold;">âœ</div>
                    </div>
                </div>

                <input type="text" id="reg-name" placeholder="çœŸå®å§“å" style="width: 100%; margin-bottom: 12px; box-sizing: border-box;">
                <select id="reg-role" style="width: 100%; margin-bottom: 12px; box-sizing: border-box; appearance: none; -webkit-appearance: none;">
                    <option value="">-- é€‰æ‹©èº«ä»½ --</option>
                    <option value="farmer">ğŸŒ¾ å†œæˆ·</option>
                    <option value="recycler">â™»ï¸ å›æ”¶å•†</option>
                    <option value="processor">ğŸ­ æœè‚‰å¤„ç†å•†</option>
                </select>

                <input type="password" id="reg-password" placeholder="å¯†ç ï¼ˆ8-16ä½ï¼Œå«å­—æ¯å’Œæ•°å­—ï¼‰" style="width: 100%; margin-bottom: 8px; box-sizing: border-box;">
                <input type="password" id="reg-confirm-password" placeholder="ç¡®è®¤å¯†ç " style="width: 100%; margin-bottom: 12px; box-sizing: border-box;">
                <div style="font-size: 11px; color: #888; margin-bottom: 12px; padding-left: 4px;">å¯†ç å¿…é¡» 8-16 ä½ï¼Œä¸”åŒæ—¶åŒ…å«æ•°å­—å’Œå­—æ¯ã€‚</div>

                <label style="display: flex; align-items: center; gap: 8px; font-size: 12px; color: #666; margin-bottom: 20px; cursor: pointer;">
                    <input type="checkbox" id="reg-agree" style="width: auto !important; margin: 0;"> 
                    <span>æˆ‘å·²é˜…è¯»å¹¶åŒæ„ <a href="#" id="privacy-link" style="color: var(--primary-green); text-decoration: none; font-weight: 600;">ã€Šéšç§æ”¿ç­–ã€‹</a> å’Œ <a href="#" id="service-link" style="color: var(--primary-green); text-decoration: none; font-weight: 600;">ã€ŠæœåŠ¡åè®®ã€‹</a></span>
                    <!-- å†…å®¹å¼¹çª— -->
                    <div id="policy-modal" style="display:none; position:fixed; left:0; top:0; width:100vw; height:100vh; background:rgba(0,0,0,0.45); z-index:3000; align-items:center; justify-content:center;">
                        <div style="background:#fff; border-radius:10px; max-width:500px; width:90vw; max-height:80vh; overflow:auto; padding:32px 24px 24px 24px; position:relative; box-shadow:0 8px 32px rgba(0,0,0,0.18);">
                            <span id="policy-modal-close" style="position:absolute; right:18px; top:10px; font-size:22px; color:#888; cursor:pointer;">Ã—</span>
                            <div id="policy-modal-content"></div>
                        </div>
                    </div>
                </label>

                <button id="btn-register" onclick="authSystem.handleRegister()" style="width: 100%; padding: 12px; background: #1abc9c; color: white; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; font-size: 16px; transition: all 0.3s;">æ³¨å†Œè´¦æˆ·</button>
            </div>
        </div>
    </div>

    <!-- CSS åŠ¨ç”» -->
    <style>
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
                box-shadow: 0 2px 6px rgba(255, 71, 87, 0.4);
            }
            50% {
                transform: scale(1.1);
                box-shadow: 0 4px 12px rgba(255, 71, 87, 0.6);
            }
            100% {
                transform: scale(1);
                box-shadow: 0 2px 6px rgba(255, 71, 87, 0.4);
            }
        }
    </style>

    <script src="main_code.js"></script>
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
    <script src="auth.js"></script>
    <script>
    // åˆå§‹åŒ–è®¤è¯ç³»ç»Ÿå’Œéšç§æ”¿ç­–/æœåŠ¡åè®®å¼¹çª—
    document.addEventListener('DOMContentLoaded', function() {
        console.log('=== Page Initialized ===');
        
        // åˆå§‹åŒ–è®¤è¯ç³»ç»Ÿï¼ˆå¤„ç†ç™»å½•/æ³¨å†ŒæŒ‰é’®ç­‰ï¼‰
        if (typeof authSystem !== 'undefined' && authSystem.init) {
            authSystem.init();
            console.log('authSystem initialized successfully');
        } else {
            console.error('authSystem not found or init method missing');
        }
        
        const modal = document.getElementById('policy-modal');
        const content = document.getElementById('policy-modal-content');
        const closeBtn = document.getElementById('policy-modal-close');
        
        if (!modal || !content || !closeBtn) {
            console.warn('Policy modal elements not found');
            return;
        }
        
        const privacyLink = document.getElementById('privacy-link');
        const serviceLink = document.getElementById('service-link');
        
        if (privacyLink) {
            privacyLink.onclick = function(e) {
                e.preventDefault();
                fetch('privacy-policy.html').then(r=>r.text()).then(html=>{content.innerHTML=html;modal.style.display='flex';});
            };
        }
        
        if (serviceLink) {
            serviceLink.onclick = function(e) {
                e.preventDefault();
                fetch('service-agreement.html').then(r=>r.text()).then(html=>{content.innerHTML=html;modal.style.display='flex';});
            };
        }
        
        closeBtn.onclick = function() {modal.style.display='none';};
        modal.onclick = function(e) {if(e.target===modal) modal.style.display='none';};
    });
    </script>
</body>
</html>